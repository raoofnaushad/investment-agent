(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5981:(e,s,t)=>{Promise.resolve().then(t.bind(t,6596))},6596:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var n=t(5155),a=t(2115),l=t(6505),r=t(3578);function o(e){let{companyName:s,chatHistory:t,onChatSelect:a}=e;return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-[#1a1a1a] text-white transition-all duration-300 w-64 md:w-72 lg:w-80",children:[(0,n.jsx)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:(0,n.jsx)("h1",{className:"font-bold text-xl",children:s})}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search chats...",className:"w-full bg-[#2a2a2a] text-white rounded-l-full rounded-r-full py-2 pl-8 pr-4 focus:outline-none focus:ring-2 focus:ring-gray-500"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 absolute left-2.5 top-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsxs)("button",{className:"flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white rounded-l-full rounded-r-full py-2 transition-colors w-full px-4",children:[(0,n.jsx)(l.g,{icon:r.QLR,className:"h-5 w-5 mr-2"}),"Chat"]})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h2",{className:"px-4 py-2 text-gray-400 text-xs uppercase",children:"Prompt Template"}),(0,n.jsx)("ul",{className:"space-y-1 px-2",children:t.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>a(e.id),className:"flex items-center w-full rounded-md py-2 px-2 ".concat(e.isActive?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#2a2a2a]"," transition-colors"),children:e.title})},e.id))})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("div",{className:"flex items-center justify-between bg-[#2a2a2a] text-white rounded-md p-2",children:(0,n.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:"I need an investment portfolio for a client with the following profile:\n    - 45-year-old professional\n    - Income: $200,000/year\n    - Investment horizon: 20 years\n    - Risk tolerance: Moderate\n    - Goal: Retirement planning\n    Please analyze and provide a comprehensive investment proposal."})})}),(0,n.jsxs)("div",{className:"mt-4 flex-grow",children:[(0,n.jsx)("h2",{className:"px-4 py-2 text-gray-400 text-xs uppercase",children:"Agents"}),(0,n.jsx)("ul",{className:"space-y-1 px-2",children:(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"flex items-center w-full rounded-md py-2 px-2 text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Investment AI"})})})]}),(0,n.jsx)("div",{className:"p-4 mt-auto",children:(0,n.jsx)("div",{className:"flex items-center justify-between bg-[#2a2a2a] text-white rounded-md p-2",children:(0,n.jsx)("span",{children:"Settings"})})})]})}var c=t(6562),i=t(9509);let d=e=>{let{onSendMessage:s,isLoading:t}=e,[l,r]=(0,a.useState)(45),[o,c]=(0,a.useState)("Professional"),[i,d]=(0,a.useState)(2e5),[m,x]=(0,a.useState)(20),[p,h]=(0,a.useState)("Moderate"),[u,g]=(0,a.useState)("Retirement planning"),b=()=>"I need an investment portfolio for a client with the following profile:\n- ".concat(l,"-year-old ").concat(o,"\n- Income: $").concat(i.toLocaleString(),"/year\n- Investment horizon: ").concat(m," years\n- Risk tolerance: ").concat(p,"\n- Goal: ").concat(u,"\nPlease analyze and provide a comprehensive investment proposal.");return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Investment AI"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(b())},className:t?"pointer-events-none opacity-60 blur-sm":"",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Age"}),(0,n.jsx)("input",{type:"number",value:l,min:18,max:100,onChange:e=>r(Number(e.target.value)),className:"w-full bg-[#2a2a2a] text-white rounded-lg p-2",disabled:t})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Career"}),(0,n.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),className:"w-full bg-[#2a2a2a] text-white rounded-lg p-2",disabled:t})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Income (per year)"}),(0,n.jsx)("input",{type:"number",value:i,min:0,step:1e3,onChange:e=>d(Number(e.target.value)),className:"w-full bg-[#2a2a2a] text-white rounded-lg p-2",disabled:t})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Investment Horizon (years)"}),(0,n.jsx)("input",{type:"number",value:m,min:1,max:50,onChange:e=>x(Number(e.target.value)),className:"w-full bg-[#2a2a2a] text-white rounded-lg p-2",disabled:t})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Risk Tolerance"}),(0,n.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full bg-[#2a2a2a] text-white rounded-lg p-2",disabled:t,children:[(0,n.jsx)("option",{children:"Low"}),(0,n.jsx)("option",{children:"Moderate"}),(0,n.jsx)("option",{children:"High"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1",children:"Goal"}),(0,n.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),className:"w-full bg-[#2a2a2a] text-white rounded-lg p-2",disabled:t})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded",disabled:t,children:"Send"})]}),t&&(0,n.jsx)("div",{className:"text-center mt-2 text-gray-400",children:"Processing... Please wait."})]})};var m=t(792);let x=e=>{let{message:s}=e,[t,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{console.log("Debug: Message received:",s)},[s]);let r=()=>{l(!t)},o=e=>e?(0,n.jsxs)("div",{className:"text-gray-400 text-sm",children:["Model Usage: Prompt Tokens: ",e.prompt_tokens,", Completion Tokens: ",e.completion_tokens]}):null;return(0,n.jsx)("div",{className:"p-4 bg-[#2a2a2a] rounded-lg text-white",children:(()=>{switch(s.message_type){case"TextMessage":let e;try{e=JSON.parse(s.content)}catch(e){return console.error("Error parsing message content:",e),(0,n.jsx)("div",{children:"Error parsing message content"})}return(0,n.jsxs)("div",{className:"p-4 bg-[#2a2a2a] rounded-lg text-white",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsxs)("span",{className:"bg-blue-500 text-white px-2 py-1 rounded",children:["Agent: ",e.source||"N/A"]}),(0,n.jsxs)("span",{className:"bg-green-500 text-white px-2 py-1 rounded",children:["Message Type: ",e.message_type||"N/A"]}),e.models_usage&&(0,n.jsxs)("span",{className:"bg-gray-500 text-white px-2 py-1 rounded",children:["Model Usage: Prompt Tokens: ",e.models_usage.prompt_tokens,", Completion Tokens: ",e.models_usage.completion_tokens]})]}),(0,n.jsx)("button",{onClick:r,className:"text-blue-500",children:t?"Collapse":"Expand"}),t&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(m.oz,{children:e.content})})]});case"ToolCallRequestEvent":let a;try{a=JSON.parse(s.content)}catch(e){return console.error("Error parsing message content:",e),(0,n.jsx)("div",{children:"Error parsing message content"})}return(0,n.jsxs)("div",{className:"p-4 bg-[#2a2a2a] rounded-lg text-white",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsxs)("span",{className:"bg-blue-500 text-white px-2 py-1 rounded",children:["Agent: ",a.source||"N/A"]}),(0,n.jsxs)("span",{className:"bg-green-500 text-white px-2 py-1 rounded",children:["Message Type: ",a.message_type||"N/A"]}),a.models_usage&&(0,n.jsxs)("span",{className:"bg-gray-500 text-white px-2 py-1 rounded",children:["Model Usage: Prompt Tokens: ",a.models_usage.prompt_tokens,", Completion Tokens: ",a.models_usage.completion_tokens]})]}),(0,n.jsx)("button",{onClick:r,className:"text-blue-500",children:t?"Collapse":"Expand"}),t&&(0,n.jsx)("div",{className:"mt-2",children:a.content.map((e,s)=>(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{children:["ID: ",e.id]}),(0,n.jsxs)("div",{children:["Name: ",e.name]}),(0,n.jsxs)("div",{children:["Arguments: ",e.arguments]}),s<a.content.length-1&&(0,n.jsx)("hr",{className:"my-2 border-gray-600"})]},s))})]});case"ToolCallExecutionEvent":let l;try{l=JSON.parse(s.content)}catch(e){return console.error("Error parsing message content:",e),(0,n.jsx)("div",{children:"Error parsing message content"})}return(0,n.jsxs)("div",{className:"p-4 bg-[#2a2a2a] rounded-lg text-white",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsxs)("span",{className:"bg-blue-500 text-white px-2 py-1 rounded",children:["Agent: ",l.source||"N/A"]}),(0,n.jsxs)("span",{className:"bg-green-500 text-white px-2 py-1 rounded",children:["Message Type: ",l.message_type||"N/A"]}),l.models_usage&&(0,n.jsxs)("span",{className:"bg-gray-500 text-white px-2 py-1 rounded",children:["Model Usage: Prompt Tokens: ",l.models_usage.prompt_tokens,", Completion Tokens: ",l.models_usage.completion_tokens]})]}),(0,n.jsx)("button",{onClick:r,className:"text-blue-500",children:t?"Collapse":"Expand"}),t&&(0,n.jsx)("div",{className:"mt-2",children:l.content.map((e,s)=>(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{children:["Name: ",e.name]}),(0,n.jsxs)("div",{children:["Call ID: ",e.call_id]}),(0,n.jsxs)("div",{children:["Is Error: ",e.is_error?"Yes":"No"]}),(0,n.jsx)("div",{className:"mt-2",children:Array.isArray(e.content)?e.content.map((e,s)=>(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:e.title}),(0,n.jsx)("p",{children:e.snippet})]},s)):(0,n.jsx)("p",{})}),s<l.content.length-1&&(0,n.jsx)("hr",{className:"my-2 border-gray-600"})]},s))})]});case"TaskResult":return(0,n.jsxs)("div",{children:[o(s.models_usage),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(m.oz,{children:s.content})})]});default:return(0,n.jsx)("div",{children:"Unknown message type"})}})()})};function p(e){let{messages:s,onReceiveMessage:t}=e,[r,o]=(0,a.useState)(null),[c,p]=(0,a.useState)(!1),[h,u]=(0,a.useState)(null),g=(0,a.useId)();return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-[#121212]",suppressHydrationWarning:!0,children:[(0,n.jsxs)("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:[s.map(e=>(0,n.jsx)(x,{message:e},e.id)),c&&(0,n.jsxs)("div",{className:"text-center flex items-center justify-center",children:[(0,n.jsx)(l.g,{icon:"spinner",spin:!0,className:"mr-2"}),"Thinking..."]}),h&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-white rounded shadow",children:(0,n.jsx)(m.oz,{children:h})})]}),(0,n.jsx)("div",{className:"p-4 border-t border-gray-700 bg-[#121212]",children:(0,n.jsx)(d,{onSendMessage:e=>{if(r&&r.readyState===WebSocket.OPEN)p(!0),r.send(e);else{let n=function(e,s,t,n){let a=new WebSocket(i.env.REACT_APP_WS_URL||"wss://adventis.lokam.ai/api/v1/ws/agentchat");return a.onopen=()=>{console.log("WebSocket connection opened")},a.onmessage=s=>{console.log("WebSocket message received:",s.data),e(s.data)},a.onclose=()=>{console.log("WebSocket connection closed")},a.onerror=e=>{console.error("WebSocket error:",e),console.error("WebSocket readyState:",a.readyState),console.error("WebSocket URL:",a.url)},a}(e=>{if("PROCESS COMPLETE"===e){var a;p(!1),u((null==(a=s[s.length-1])?void 0:a.content)||null),n.close()}else p(!1),t({id:"msg-".concat(Date.now()),sender:"assistant",content:e,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),message_type:JSON.parse(e).message_type,models_usage:JSON.parse(e).models_usage}),p(!0)});o(n),n.onopen=()=>{console.log("WebSocket connection opened"),p(!0),n.send(e)},n.onclose=()=>{console.log("WebSocket connection closed"),p(!1)},n.onerror=e=>{console.error("WebSocket error:",e),p(!1)}}},isLoading:c})})]},g)}function h(){let[e,s]=(0,a.useState)([]);return(0,n.jsxs)("main",{className:"flex h-screen bg-[#1a1a1a]",children:[(0,n.jsx)(o,{companyName:"Adventis.ai",chatHistory:[],onChatSelect:e=>{console.log("Selected chat: ".concat(e))}}),(0,n.jsx)("div",{className:"flex-1 border-l border-gray-700 overflow-hidden",children:(0,n.jsx)(p,{messages:e,onReceiveMessage:e=>{s(s=>[...s,e])}})})]})}c.Yv.add(r.z1G)}},e=>{var s=s=>e(e.s=s);e.O(0,[266,408,441,684,358],()=>s(5981)),_N_E=e.O()}]);